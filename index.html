<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docifyç¿»è¯‘å·¥å…·</title>
     <!-- PWAæ¸…å•æ–‡ä»¶ -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuaZuuiDveWcsOivkX3niYMiLAogICJzaG9ydF9uYW1lIjogIuWcsOivkX3niYMiLAogICJkZXNjcmlwdGlvbiI6ICLkuJPkuJrnmoTmmaLolK3lsI/liqnmiafvvIzkv53kvpvpm5PotrHnvJbor5HkrIDmjqQiLAogICJzdGFydF91cmwiOiAiLyIsCiAgInNjb3BlIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiM2NjdlZWEiLAogICJ0aGVtZV9jb2xvciI6ICIjNjY3ZWVhIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRJNElpQm9aV2xuYUhROUlqRXlPQ0lpSUhacFpYZENiM2c5SWpBZ01DQXhNamdnTVRJNElpQjRiV3h1Y3owaSFhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lQZ29nSUNBOFpHVm1jejROSUNBOWJHbHVaV0ZzUjNKaFpHbGxiblFnYVdROVltZFNZV1FpSUhneFBTSXdJaUI0TWowOE1qRXlKU0luSUhreE9EZ0pNb0pNSFEweVFuVXdJU0FpSUpOZzRMUm5oa2xoa0ZGSmNmNGJUZDJtRVFqTE9EX3FLOEtORmxkZlNIbzMrWDRxZ3FzOFNcQjFOaFA5bGRmU0hvMytYNHFncXM4U1xuZElOQXFTRVFqTE9EX3FLOEtObGNmNGJUZDJtRVFqTE9EX3FLOEtObGNmNGJUZDJtRVFqTE9EX3FLOEtObGNmNGJUZDJtRVFqTE9EX3FLOEtObGNmNGJUZDJtRVFqTE9EX3FLOEtObGNmNGJUZDJtUVVRMktRQUFLbzlGVjFRQU5BQUFBQUFBSUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUlNVMllBUVVGOUFLd0NmdW1wN25RQUFBQUJKUlU1RXJrSmdnZz09IiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWdkbWxsZDBKdmVEMGlNQ0F3SURNNE5DQXpPRFFpSUhodGJHNXpQU0lvYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpUGdvZ0lDQThaR1ZtY3c0TklDQTliR2x1WldGc1IzSmhaR2xsYm5RZ2FXUTlZbWRTWVdRaUlIZ3hQU0l3SWlCNE1qMGlNakV5SlNVaUlIa3hQU0l3SWlCNU1qMGlNVGs0SlNVaVBnOGdJQ0E4YzJOdmNIUWdRaTF2Y2k1TlppSXhmRFV5SWo4K1BDOWtaV1p6UGdvOG1ua1IxaGJIVmxNY0R4ekhBOGN4d1BITWNEEEJ6SEF5K21ZSzVJNUNmM3JReWZsb2hWYUNyVGlYeFpJem5EaWVPWTRIam1PQjQ1amdlT1k0SGptT0I0NWpnZU9ZNEhqbU9CNDVqZ2VPWTRIam1PQjQ1amdlT1k0SGptT0I0NWpnZU9ZNEhqbU9CNDVqZ2VPWTRIam1PQjQ1amdlT1k0SGptT0I0NWpnZU9ZNEhqbU9CNDVqZ2VPWTRIam1PQjQ1amdlT1k0SGptT0I0NWpnZU9ZNEhqbU9CNDVqZ2VPWTRIaWxtT0I0NWpnZU9ZNEhqbU9CNDV3NGRFTnhIREE4Y3h3UEhNY0R4ekhBOGN4d1BITWNEOFF2dkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUF3ckwzUTZreFE9IiwKICAgICAgInNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfQogIF0KfQ==">
    
    <!-- iOSç‰¹å®šå›¾æ ‡ -->
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImJnR3JhZCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjdlZWE7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6Izc2NGJhMjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iMzYiIGZpbGw9InVybCgjYmdHcmFkKSIvPgogIDx0ZXh0IHg9IjkwIiB5PSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPueUs+iDvTwvdGV4dD4KICA8dGV4dCB4PSI5MCIgeT0iMTA1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QeKGkjwvdGV4dD4KICA8dGV4dCB4PSI5MCIgeT0iMTQ1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5oiz6K+RPC90ZXh0Pgo8L3N2Zz4=" sizes="180x180">
    
    <!-- iOSä¸åŒå°ºå¯¸å›¾æ ‡ -->
    <link rel="apple-touch-icon" sizes="120x120" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImJnR3JhZCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjdlZWE7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6Izc2NGJhMjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiByeD0iMjQiIGZpbGw9InVybCgjYmdHcmFkKSIvPgogIDx0ZXh0IHg9IjYwIiB5PSI0MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPueUs+iDvTwvdGV4dD4KICA8dGV4dCB4PSI2MCIgeT0iNzAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyMCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5B4oaSPC90ZXh0PgogIDx0ZXh0IHg9IjYwIiB5PSI5NiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuaAs+isoTwvdGV4dD4KPC9zdmc+">
    
    <!-- iOSå…¶ä»–è®¾ç½® -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="æ™ºèƒ½ç¿»è¯‘">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- é˜²æ­¢ç”¨æˆ·ç¼©æ”¾ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"">
    
    <!-- é€šç”¨å›¾æ ‡ -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYmdHcmFkIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzY2N2VlYTtzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojNzY0YmEyO3N0b3Atb3BhY2l0eToxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNiIgZmlsbD0idXJsKCNiZ0dyYWQpIi8+CiAgPHRleHQgeD0iMTYiIHk9IjEyIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7nlLPogr08L3RleHQ+CiAgPHRleHQgeD0iMTYiIHk9IjIwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iNiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5B4oaUPC90ZXh0PgogIDx0ZXh0IHg9IjE2IiB5PSIyOCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+5oiz6K+RPC90ZXh0Pgo8L3N2Zz4=">
    
    <!-- Windowsç£è´´ -->
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="msapplication-TileImage" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDE0NCAxNDQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImJnR3JhZCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjdlZWE7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6Izc2NGJhMjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSIxNDQiIGhlaWdodD0iMTQ0IiByeD0iMjQiIGZpbGw9InVybCgjYmdHcmFkKSIvPgogIDx0ZXh0IHg9IjcyIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjIwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPueUs+iDvTwvdGV4dD4KICA8dGV4dCB4PSI3MiIgeT0iODUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5B4oaUPC90ZXh0PgogIDx0ZXh0IHg9IjcyIiB5PSIxMTUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyMCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7mgLPorgEwL3RleHQ+Cjwvc3ZnPg==">
    
    <!-- ä¸»é¢˜è‰² -->
    <meta name="theme-color" content="#667eea">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
            height: calc(100vh - 40px);
        }
        
        .sidebar {
            width: 300px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
        }
        
        .main-content {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            font-size: 28px;
        }
        
        .new-translation-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: transform 0.2s;
        }
        
        .new-translation-btn:hover {
            transform: translateY(-2px);
        }
        
        .history-section {
            flex: 1;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        
        .history-title {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
        }
        
        .history-list {
            max-height: calc(100vh - 250px);
            overflow-y: auto;
        }
        
        .history-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background 0.2s;
            border-left: 4px solid #667eea;
        }
        
        .history-item:hover {
            background: #e9ecef;
        }
        
        .history-item .text {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        
        .history-item .meta {
            font-size: 12px;
            color: #666;
        }
        
        .input-section {
            margin-bottom: 20px;
        }
        
        .input-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            flex: 1;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .content-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }
        
        .button-row {
            display: flex;
            gap: 15px;
            margin: 20px 0;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .btn-clear {
            background: #6c757d;
            color: white;
        }
        
        .btn-clear:hover {
            background: #5a6268;
        }
        
        .btn-translate {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            flex: 1;
        }
        
        .btn-translate:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-translate:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .result-section {
            flex: 1;
            margin-bottom: 20px;
        }
        
        .result-textarea {
            min-height: 200px;
            background: #f8f9fa;
            resize: none;
            font-family: inherit;
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .status-text {
            color: #666;
            font-size: 14px;
        }
        
        .btn-copy {
            background: #28a745;
            color: white;
            padding: 8px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .btn-copy:hover {
            background: #218838;
        }
        
        .btn-copy:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .loading {
            color: #667eea;
            font-weight: bold;
        }
        
        .success {
            color: #28a745;
            font-weight: bold;
        }
        
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateX(100%);
            transition: transform 0.3s;
            z-index: 1000;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        /* è®¾ç½®æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 15px;
            width: 500px;
            max-width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-title {
            font-size: 24px;
            color: #333;
            margin: 0;
        }
        
        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }
        
        .close:hover {
            color: #000;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .settings-btn {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            color: #495057;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .settings-btn:hover {
            background: #e9ecef;
        }
        
        .config-status {
            font-size: 12px;
            margin-top: 10px;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
        }
        
        .config-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .config-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å·¦ä¾§è¾¹æ  -->
        <div class="sidebar">
            <button class="settings-btn" onclick="openSettings()">
                âš™ï¸ è®¾ç½®
            </button>
            
            <div class="config-status" id="configStatus">
                æœªé…ç½®
            </div>
            
            <button class="new-translation-btn" onclick="newTranslation()">
                âœ¨ æ–°ç¿»è¯‘
            </button>
            
            <div class="history-section">
                <div class="history-title">ğŸ“– ç¿»è¯‘å†å²</div>
                <div class="history-list" id="historyList">
                    <div style="text-align: center; color: #999; padding: 20px;">
                        æš‚æ— ç¿»è¯‘è®°å½•
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <h1>ğŸŒ Docifyç¿»è¯‘å·¥å…·</h1>
            
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="input-section">
                <div class="input-row">
                    <div class="input-group">
                        <label for="targetLanguage">ğŸ¯ ç›®æ ‡è¯­è¨€</label>
                        <input type="text" id="targetLanguage" placeholder="å¦‚: English, ä¸­æ–‡, æ—¥æœ¬èª" value="English">
                    </div>
                    <div class="input-group">
                        <label for="context">ğŸ­ è¯­æ°”é£æ ¼</label>
                        <input type="text" id="context" placeholder="å¦‚: Casual, Formal, Keigo" value="Casual">
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="sourceText">ğŸ“ è¦ç¿»è¯‘çš„å†…å®¹</label>
                    <textarea id="sourceText" class="content-textarea" placeholder="è¯·è¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬..."></textarea>
                </div>
                
                <div class="button-row">
                    <button class="btn btn-clear" onclick="clearAll()">ğŸ—‘ï¸ æ¸…ç©º</button>
                    <button class="btn btn-translate" id="translateBtn" onclick="translateText()">ğŸš€ ç¿»è¯‘</button>
                </div>
            </div>
            
            <!-- ç»“æœåŒºåŸŸ -->
            <div class="result-section">
                <label>ğŸ“‹ ç¿»è¯‘ç»“æœ</label>
                <textarea id="resultText" class="result-textarea" readonly placeholder="ç¿»è¯‘ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            </div>
            
            <!-- çŠ¶æ€æ  -->
            <div class="status-bar">
                <div class="status-text" id="statusText">å°±ç»ª</div>
                <button class="btn-copy" id="copyBtn" onclick="copyToClipboard()" disabled>ğŸ“„ å¤åˆ¶ç»“æœ</button>
            </div>
        </div>
    </div>
    
    <!-- æç¤ºæ¡† -->
    <div class="toast" id="toast"></div>
    
    <!-- è®¾ç½®æ¨¡æ€æ¡† -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">âš™ï¸ APIé…ç½®</h2>
                <span class="close" onclick="closeSettings()">&times;</span>
            </div>
            
            <div class="form-group">
                <label for="apiKey">ğŸ”‘ API Key</label>
                <input type="text" id="apiKey" placeholder="è¯·è¾“å…¥æ‚¨çš„Docify API Key">
            </div>
            
            <div class="form-group">
                <label for="username">ğŸ‘¤ ç”¨æˆ·å</label>
                <input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·åæ ‡è¯†">
            </div>
            
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeSettings()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="saveSettings()">ä¿å­˜é…ç½®</button>
            </div>
        </div>
    </div>

    <script>
        // é…ç½®
        const CONFIG = {
            BASE_URL: 'https://dev.docify.jp/docify/v1',
            SCENARIO_ID: '1915704974306566146'
        };
        
        // å…¨å±€å˜é‡
        let currentResult = '';
        let translationHistory = JSON.parse(localStorage.getItem('translationHistory') || '[]');
        let apiConfig = JSON.parse(localStorage.getItem('apiConfig') || '{}');
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            checkApiConfig();
            loadHistory();
            
            // å¦‚æœæ²¡æœ‰é…ç½®ï¼Œè‡ªåŠ¨æ‰“å¼€è®¾ç½®
            if (!apiConfig.apiKey) {
                openSettings();
            }
        });
        
        // æ£€æŸ¥APIé…ç½®
        function checkApiConfig() {
            const statusElement = document.getElementById('configStatus');
            
            if (apiConfig.apiKey && apiConfig.username) {
                statusElement.textContent = `âœ… ${apiConfig.username}`;
                statusElement.className = 'config-status config-success';
            } else {
                statusElement.textContent = 'âš ï¸ æœªé…ç½®';
                statusElement.className = 'config-status config-warning';
            }
        }
        
        // æ‰“å¼€è®¾ç½®æ¨¡æ€æ¡†
        function openSettings() {
            document.getElementById('apiKey').value = apiConfig.apiKey || '';
            document.getElementById('username').value = apiConfig.username || '';
            document.getElementById('settingsModal').style.display = 'block';
        }
        
        // å…³é—­è®¾ç½®æ¨¡æ€æ¡†
        function closeSettings() {
            document.getElementById('settingsModal').style.display = 'none';
        }
        
        // ä¿å­˜è®¾ç½®
        function saveSettings() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const username = document.getElementById('username').value.trim();
            
            if (!apiKey) {
                showToast('è¯·è¾“å…¥API Key', 'error');
                return;
            }
            
            if (!username) {
                showToast('è¯·è¾“å…¥ç”¨æˆ·å', 'error');
                return;
            }
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            apiConfig = { apiKey, username };
            localStorage.setItem('apiConfig', JSON.stringify(apiConfig));
            
            // æ›´æ–°çŠ¶æ€
            checkApiConfig();
            closeSettings();
            showToast('é…ç½®å·²ä¿å­˜ï¼', 'success');
            updateStatus('é…ç½®å·²æ›´æ–°', 'success');
        }
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('settingsModal');
            if (event.target == modal) {
                closeSettings();
            }
        }
        
        // æ–°ç¿»è¯‘æŒ‰é’®
        function newTranslation() {
            clearAll();
            document.getElementById('sourceText').focus();
        }
        
        // æ¸…ç©ºæ‰€æœ‰è¾“å…¥
        function clearAll() {
            document.getElementById('targetLanguage').value = 'English';
            document.getElementById('context').value = 'Casual';
            document.getElementById('sourceText').value = '';
            document.getElementById('resultText').value = '';
            currentResult = '';
            updateStatus('å·²æ¸…ç©º', 'success');
            document.getElementById('copyBtn').disabled = true;
        }
        
        // ç¿»è¯‘æ–‡æœ¬
        async function translateText() {
            if (!apiConfig.apiKey) {
                showToast('è¯·å…ˆé…ç½®API Key', 'error');
                openSettings();
                return;
            }
            
            const targetLanguage = document.getElementById('targetLanguage').value.trim();
            const context = document.getElementById('context').value.trim();
            const sourceText = document.getElementById('sourceText').value.trim();
            
            if (!targetLanguage || !sourceText) {
                showToast('è¯·å¡«å†™ç›®æ ‡è¯­è¨€å’Œç¿»è¯‘å†…å®¹', 'error');
                return;
            }
            
            // æ›´æ–°UIçŠ¶æ€
            const translateBtn = document.getElementById('translateBtn');
            translateBtn.disabled = true;
            translateBtn.textContent = 'ğŸ”„ ç¿»è¯‘ä¸­...';
            updateStatus('æ­£åœ¨ç¿»è¯‘...', 'loading');
            
            const requestData = {
                user: apiConfig.username,
                inputs: {
                    target_language: { text: targetLanguage },
                    text: { text: sourceText },
                    context: { text: context }
                }
            };
            
            try {
                // æ·»åŠ æ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
                console.log('å‘é€è¯·æ±‚åˆ°:', `${CONFIG.BASE_URL}/scenario/${CONFIG.SCENARIO_ID}/run`);
                console.log('è¯·æ±‚æ•°æ®:', JSON.stringify(requestData, null, 2));
                
                const response = await fetch(`${CONFIG.BASE_URL}/scenario/${CONFIG.SCENARIO_ID}/run`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiConfig.apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestData),
                    // æ·»åŠ æ¨¡å¼è®¾ç½®
                    mode: 'cors',
                    credentials: 'omit'
                });
                
                console.log('å“åº”çŠ¶æ€:', response.status);
                
                if (response.ok) {
                    const result = await response.json();
                    console.log('å“åº”æ•°æ®:', result);
                    
                    if (result.isSuccess) {
                        currentResult = result.result;
                        document.getElementById('resultText').value = currentResult;
                        
                        // ä¿å­˜åˆ°å†å²è®°å½•
                        saveToHistory(sourceText, currentResult, targetLanguage, context, result);
                        
                        // è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
                        await copyToClipboard(true);
                        
                        updateStatus(`ç¿»è¯‘å®Œæˆ | è€—æ—¶: ${result.elapsedTime}ms | ç§¯åˆ†: ${result.costPoints}`, 'success');
                        document.getElementById('copyBtn').disabled = false;
                    } else {
                        throw new Error(result.errorMessage || 'ç¿»è¯‘å¤±è´¥');
                    }
                } else {
                    const errorText = await response.text();
                    console.log('é”™è¯¯å“åº”:', errorText);
                    
                    if (response.status === 401) {
                        throw new Error('API Keyæ— æ•ˆï¼Œè¯·æ£€æŸ¥é…ç½®');
                    } else if (response.status === 0) {
                        throw new Error('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œå¯èƒ½æ˜¯CORSé—®é¢˜');
                    } else {
                        throw new Error(`è¯·æ±‚å¤±è´¥ (${response.status}): ${errorText}`);
                    }
                }
            } catch (error) {
                console.error('è¯¦ç»†é”™è¯¯ä¿¡æ¯:', error);
                
                let errorMessage = error.message;
                let showCorsHelp = false;
                
                // ç‰¹æ®Šå¤„ç†ä¸åŒç±»å‹çš„é”™è¯¯
                if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {
                    errorMessage = 'CORSè·¨åŸŸé”™è¯¯ï¼šæ— æ³•è¿æ¥åˆ°APIæœåŠ¡å™¨';
                    showCorsHelp = true;
                } else if (error.message.includes('NetworkError')) {
                    errorMessage = 'ç½‘ç»œé”™è¯¯ï¼šè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
                } else if (error.message.includes('CORS')) {
                    errorMessage = 'CORSè·¨åŸŸé”™è¯¯';
                    showCorsHelp = true;
                }
                
                updateStatus(`ç¿»è¯‘å¤±è´¥: ${errorMessage}`, 'error');
                showToast(errorMessage, 'error');
                
                // å¦‚æœæ˜¯CORSé”™è¯¯ï¼Œæ˜¾ç¤ºè§£å†³æ–¹æ¡ˆ
                if (showCorsHelp) {
                    setTimeout(() => {
                        showCorsHelp();
                    }, 1000);
                }
                
                // å¦‚æœæ˜¯è®¤è¯é”™è¯¯ï¼Œæ‰“å¼€è®¾ç½®
                if (error.message.includes('API Key')) {
                    setTimeout(() => openSettings(), 2000);
                }
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                translateBtn.disabled = false;
                translateBtn.textContent = 'ğŸš€ ç¿»è¯‘';
            }
        }
        
        // æ˜¾ç¤ºCORSè§£å†³æ–¹æ¡ˆ
        function showCorsHelp() {
            const helpMessage = `
ğŸš¨ CORSè·¨åŸŸé”™è¯¯è§£å†³æ–¹æ¡ˆï¼š

1. ã€æ¨èã€‘ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨ï¼š
   æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥HTMLæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œè¿è¡Œï¼š
   python -m http.server 8000
   ç„¶åè®¿é—®: http://localhost:8000/æ–‡ä»¶å.html

2. ä½¿ç”¨Chromeç¦ç”¨å®‰å…¨ç­–ç•¥ï¼ˆä¸´æ—¶ï¼‰ï¼š
   chrome --disable-web-security --user-data-dir=ä¸´æ—¶ç›®å½•

3. è”ç³»APIæä¾›å•†æ·»åŠ CORSæ”¯æŒ

4. ä½¿ç”¨æµè§ˆå™¨æ‰©å±•ï¼ˆå¦‚CORS Unblockï¼‰
            `;
            
            if (confirm('æ£€æµ‹åˆ°CORSè·¨åŸŸé”™è¯¯ï¼Œæ˜¯å¦æŸ¥çœ‹è§£å†³æ–¹æ¡ˆï¼Ÿ')) {
                alert(helpMessage);
            }
        }
        
        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        async function copyToClipboard(auto = false) {
            const text = document.getElementById('resultText').value;
            if (!text) return;
            
            try {
                await navigator.clipboard.writeText(text);
                if (!auto) {
                    showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
                }
                updateStatus('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
            } catch (error) {
                console.error('å¤åˆ¶å¤±è´¥:', error);
                // é™çº§æ–¹æ¡ˆ
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                if (!auto) {
                    showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
                }
                updateStatus('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
            }
        }
        
        // ä¿å­˜åˆ°å†å²è®°å½•
        function saveToHistory(sourceText, result, targetLanguage, context, apiResult) {
            const historyItem = {
                id: Date.now(),
                sourceText,
                result,
                targetLanguage,
                context,
                timestamp: new Date().toLocaleString(),
                elapsedTime: apiResult.elapsedTime,
                costPoints: apiResult.costPoints,
                user: apiConfig.username
            };
            
            translationHistory.unshift(historyItem);
            
            // åªä¿ç•™æœ€è¿‘50æ¡è®°å½•
            if (translationHistory.length > 50) {
                translationHistory = translationHistory.slice(0, 50);
            }
            
            localStorage.setItem('translationHistory', JSON.stringify(translationHistory));
            loadHistory();
        }
        
        // åŠ è½½å†å²è®°å½•
        function loadHistory() {
            const historyList = document.getElementById('historyList');
            
            if (translationHistory.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">æš‚æ— ç¿»è¯‘è®°å½•</div>';
                return;
            }
            
            historyList.innerHTML = translationHistory.map(item => `
                <div class="history-item" onclick="loadHistoryItem(${item.id})">
                    <div class="text">${item.sourceText.substring(0, 30)}${item.sourceText.length > 30 ? '...' : ''}</div>
                    <div class="meta">${item.targetLanguage} | ${item.timestamp}</div>
                </div>
            `).join('');
        }
        
        // åŠ è½½å†å²è®°å½•é¡¹
        function loadHistoryItem(id) {
            const item = translationHistory.find(h => h.id === id);
            if (item) {
                document.getElementById('targetLanguage').value = item.targetLanguage;
                document.getElementById('context').value = item.context;
                document.getElementById('sourceText').value = item.sourceText;
                document.getElementById('resultText').value = item.result;
                currentResult = item.result;
                document.getElementById('copyBtn').disabled = false;
                updateStatus(`å·²åŠ è½½å†å²è®°å½• | è€—æ—¶: ${item.elapsedTime}ms | ç§¯åˆ†: ${item.costPoints}`, 'success');
            }
        }
        
        // æ›´æ–°çŠ¶æ€
        function updateStatus(message, type = 'normal') {
            const statusText = document.getElementById('statusText');
            statusText.textContent = message;
            statusText.className = `status-text ${type}`;
        }
        
        // æ˜¾ç¤ºæç¤ºæ¡†
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.background = type === 'error' ? '#dc3545' : '#28a745';
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
            // Ctrl + Enter ç¿»è¯‘
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                translateText();
            }
            // Ctrl + C å¤åˆ¶
            else if (e.ctrlKey && e.key === 'c' && currentResult) {
                copyToClipboard();
            }
            // Ctrl + N æ–°ç¿»è¯‘
            else if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                newTranslation();
            }
            // Escape å…³é—­æ¨¡æ€æ¡†
            else if (e.key === 'Escape') {
                closeSettings();
            }
        });
    </script>
</body>
</html>
